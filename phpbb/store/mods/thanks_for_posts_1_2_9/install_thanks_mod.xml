<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--NOTICE: Please open this file in your web browser. If presented with a security warning, you may safely tell it to allow the blocked content.-->
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD.\nAlthough MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD.\nNo support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<meta name="generator" content="MODX file generated with PP MODX Creator by tumba25 (offline version)"/>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>
		<title lang="en"><![CDATA[Thanks for posts]]></title>
		<title lang="ru"><![CDATA[Благодарность за сообщения]]></title>
		<description lang="en"><![CDATA[Mod adds the ability to thank the author (thanks to cancel), and use the rating system.]]></description>
		<description lang="ru"><![CDATA[Мод добавляет возможность поблагодарить автора сообщения (отменить благодарность), а также использовать систему рейтинга.]]></description>
		<author-notes lang="en"><![CDATA[Note:
- The option is realised by inclusion of the added access right to forums. When you install MOD the permission added to the role of Standard access. (If you want to set other preferences: Goto ACP - Permissions and select forums where you wish to resolve the right "Can thanks for posts" and resolve it in TAB Misc).
- The choice of reception of notices on thanks in UCP - Board preferences.
- The setting options and upgrade of counters after mass removal of post/topic/users - in ACP - Tab .MODS - Thanks for post.
- To view a list of thanks need to allow the global user permission - "Can view list of thanks" in TAB Misc. When you install MOD the permission added to the role of Standard features.
- To view a toplist need to allow the global user permission - "Can view toplist" in TAB Misc. When you install MOD the permission added to the role of Standard features.]]></author-notes>
		<author-notes lang="ru"><![CDATA[Примечания:
- Опции реализованы включением добавленного права доступа к форумам. При установке право добавлено в роль Стандартный доступ. (Если вы хотите установить другие настройки: перейдите в Администраторский раздел - Права доступа - Локальные права - Права доступа к форумам и выберите форумы, где вы хотите иметь функцию благодарностей за сообщения. Разрешите право "Может благодарить за сообщения" на вкладке Разное).
- Переключатель выбора опции получения уведомлений о благодарностях в Личном разделе - Личные настройки.
- Настройки опций, в том числе обновление счётчиков после массового удаления сообщений/тем/пользователей - в Администраторском разделе - Модули - Благодарности.
- Для просмотра списка благодарностей нужно разрешить глобальное пользовательское право - "Может просматривать лист благодарностей" на вкладке Разное. При установке право добавлено в роль Стандартные возможности.
- Для просмотра топлиста нужно разрешить глобальное пользовательское право - "Может просматривать топлист" на вкладке Разное. При установке право добавлено в роль Стандартные возможности.]]></author-notes>
		<author-group>
			<author>
				<realname><![CDATA[Палыч]]></realname>
				<username><![CDATA[Палыч]]></username>
				<homepage><![CDATA[http://phpbbguru.net/community/]]></homepage>
				<email><![CDATA[gfksxguru@mail.ru]]></email>
			</author>
		</author-group>
		<mod-version>1.2.9</mod-version>
		<installation>
			<level>easy</level>
			<time>600</time>
			<target-version>3.0.7-PL1</target-version>
		</installation>
		<history>
			<entry>
				<date>2010-08-15</date>
				<rev-version>1.2.9</rev-version>
				<changelog lang="en">
					<change><![CDATA[Small cosmetic and css fix]]></change>
					<change><![CDATA[Optimization of SQL-queries]]></change>
					<change><![CDATA[Added option for notification by Email]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Небольшие косметические и css правки]]></change>
					<change><![CDATA[Оптимизация SQL-запросов]]></change>
					<change><![CDATA[Добавлена опция уведомления по Email]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-06-20</date>
				<rev-version>1.2.8</rev-version>
				<changelog lang="en">
					<change><![CDATA[Added a rating system posts, topics, forums]]></change>
					<change><![CDATA[Added option on/off display time thanks]]></change>
					<change><![CDATA[Added option users toplist in thankslist]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлена система рейтинга сообщений, тем, форумов]]></change>
					<change><![CDATA[Добавлена опция вывода времени благодарности]]></change>
					<change><![CDATA[Добавлена опция топлиста пользователей в списке благодарностей]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-04-11</date>
				<rev-version>1.2.7</rev-version>
				<changelog lang="en">
					<change><![CDATA[Some bugs css fixed.]]></change>
					<change><![CDATA[Added sorting by number of thanks]]></change>
					<change><![CDATA[Changed module in ACP]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Исправлены ошибки css.]]></change>
					<change><![CDATA[Добавлена сортировка по числу благодарностей]]></change>
					<change><![CDATA[Изменен модуль в ACP]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2010-02-05</date>
				<rev-version>1.2.6</rev-version>
				<changelog lang="en">
					<change><![CDATA[Some small bugs fixed.]]></change>
					<change><![CDATA[Fix bug display thanks if user delete.]]></change>
					<change><![CDATA[Added limit of display in the post list thanks.]]></change>
					<change><![CDATA[Added links to the post of general lists of gratitude.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Исправлены небольшие ошибки.]]></change>
					<change><![CDATA[Исправлено отображение благодарностей при удалении пользователя.]]></change>
					<change><![CDATA[Добавлен лимит отображения в посте списка благодарностей.]]></change>
					<change><![CDATA[Добавлены ссылки с поста на общие списки благодарностей.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-10-11</date>
				<rev-version>1.2.5</rev-version>
				<changelog lang="en">
					<change><![CDATA[Adapted for UMIL]]></change>
					<change><![CDATA[Adapted for version phpbb 3.0.6]]></change>
					<change><![CDATA[Some small bugs fixed.]]></change>
					<change><![CDATA[Added style Avalon]]></change>
					<change><![CDATA[Added style DirtyBoard2.0]]></change>
					<change><![CDATA[Added Dutch language.]]></change>
					<change><![CDATA[Added Spanish language.]]></change>
					<change><![CDATA[Discontinued support for installation over Thank Post MOD author Geoffrey Craft.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Адаптирован под UMIL]]></change>
					<change><![CDATA[Адаптирован под версию phpbb 3.0.6]]></change>
					<change><![CDATA[Исправлены небольшие ошибки.]]></change>
					<change><![CDATA[Добавлен стиль Avalon]]></change>
					<change><![CDATA[Добавлен стиль DirtyBoard2.0]]></change>
					<change><![CDATA[Добавлен датский язык.]]></change>
					<change><![CDATA[Добавлен испанский язык.]]></change>
					<change><![CDATA[Прекращена поддержка установки поверх Thank Post MOD автора Geoffrey Craft.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-08-03</date>
				<rev-version>1.2.4</rev-version>
				<changelog lang="en">
					<change><![CDATA[Change the terms of inserting a thanks to avoid messages about sql-error when user double-click on button.]]></change>
					<change><![CDATA[Optimized function refresh().]]></change>
					<change><![CDATA[Fixed translation of linguistic variables.]]></change>
					<change><![CDATA[Added option on/off display counters thanks.]]></change>
					<change><![CDATA[Added option on/off display info pages.]]></change>
					<change><![CDATA[Added option clear the list of thanks.]]></change>
					<change><![CDATA[Added option thanks only to the first message to the topic.]]></change>
					<change><![CDATA[Fix minor bag in viewtopic.php.]]></change>
					<change><![CDATA[Change image buttons style prosilver.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Изменены условия вставки "спасибо" для избежания сообщения об sql-ошибке при двойном клике на кнопку.]]></change>
					<change><![CDATA[Оптимизирована функция refresh().]]></change>
					<change><![CDATA[Исправлены ошибки перевода языковых переменных.]]></change>
					<change><![CDATA[Добавлена опция отключения вывода счётчиков благодарностей в блок сведений об авторе сообщения.]]></change>
					<change><![CDATA[Добавлена опция отключения вывода информационных сообщений о выдаче/отмене благодарности.]]></change>
					<change><![CDATA[Добавлена опция полной очистки списка благодарностей.]]></change>
					<change><![CDATA[Добавлена опция благодарности только за первое сообщение темы.]]></change>
					<change><![CDATA[Исправлена небольшая ошибка вызова функции в viewtopic.php.]]></change>
					<change><![CDATA[Изменены изображения кнопок в стиле prosilver.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-06-11</date>
				<rev-version>1.2.3</rev-version>
				<changelog lang="en">
					<change><![CDATA[Fix minor bags and optimized code (thanks tumba25).]]></change>
					<change><![CDATA[Аdjusted BBCODE parsing in the thanklist search.]]></change>
					<change><![CDATA[Аdjusted thankslist.php is viewable if "Can view list of thanks" is set to NO.]]></change>
					<change><![CDATA[Updated files for English language (thanks knmt).]]></change>
					<change><![CDATA[Added files for French (thanks zach').]]></change>
					<change><![CDATA[Added files for Brazilian Portuguese (thanks Paulo França Lacerda).]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Исправлены ошибки и оптимизирован код (спасибо tumba25).]]></change>
					<change><![CDATA[Откорректирован парсинг BBCODE при выводе списка сообщений (thankslist.php).]]></change>
					<change><![CDATA[Откорректирован доступ к просмотру списка сообщений (thankslist.php).]]></change>
					<change><![CDATA[Обновлены английские языковые файлы (спасибо knmt).]]></change>
					<change><![CDATA[Добавлены французские языковые файлы (спасибо zach').]]></change>
					<change><![CDATA[Добавлены португальские языковые файлы (спасибо Paulo França Lacerda).]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-05-15</date>
				<rev-version>1.2.2</rev-version>
				<changelog lang="en">
					<change><![CDATA[Fix minor bags and optimized code(thanks A_Jelly_Doughnut, A_O_C and DavidIQ).]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Исправлены ошибки и оптимизирован код (спасибо A_Jelly_Doughnut, A_O_C and DavidIQ).]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-03-12</date>
				<rev-version>1.2.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[Add option on/off remove thanks.]]></change>
					<change><![CDATA[Add check permissions for postlist in thankslist.]]></change>
					<change><![CDATA[Adjusted withdrawal of thanks in thankslist.]]></change>
					<change><![CDATA[Fix code bags (thanks TerraFrost and A_O_C).]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлена опция отключения возможности удаления благодарностей.]]></change>
					<change><![CDATA[Добавлен учёт прав при выводе постов в списке благодарностей.]]></change>
					<change><![CDATA[Откорректирован вывод числа благодарностей в листе.]]></change>
					<change><![CDATA[Исправлены ошибки в коде (спасибо TerraFrost и A_O_C).]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-02-22</date>
				<rev-version>1.2.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Standart MODX 1.2.2]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[МОД приведён в соответствие стандарту MODX 1.2.2]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-02-21</date>
				<rev-version>1.1.4</rev-version>
				<changelog lang="en">
					<change><![CDATA[Add thankslist.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлен список благодарностей.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-02-05</date>
				<rev-version>1.1.3</rev-version>
				<changelog lang="en">
					<change><![CDATA[Add module in ACP.]]></change>
					<change><![CDATA[Optimazid refresh function.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлен модуль настроек в Административный раздел.]]></change>
					<change><![CDATA[Оптимизирована фукнкция обновления счётчиков.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-26</date>
				<rev-version>1.1.2b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Fix error in instruction install over Thank Post MOD by Geoffrey Craft (thanks Skinny777).]]></change>
					<change><![CDATA[Fix error in install instruction for subsilver2 (thanks Skinny777).]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Исправлены ошибки в инструкции для стиля subsilver2 (спасибо Skinny777).]]></change>
					<change><![CDATA[Исправлены ошибки в инструкции для установки поверх Thank Post MOD автора Geoffrey Craft (спасибо Skinny777).]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-25</date>
				<rev-version>1.1.1b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Add style subsilver2.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлен стиль subsilver2.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-24</date>
				<rev-version>1.1.0b</rev-version>
				<changelog lang="en">
					<change><![CDATA[The main functions for loading lowering are changed.]]></change>
					<change><![CDATA[The choice of reception of notices on thanks in UCP is added.]]></change>
					<change><![CDATA[The option of upgrade of counters after mass removal of post/topic is added by that in MCP.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Изменены основные функции для снижения загрузки.]]></change>
					<change><![CDATA[Добавлен выбор получения уведомлений о благодарностях в личном разделе.]]></change>
					<change><![CDATA[Добавлена в модераторский раздел опция обновления счётчиков после массового удаления сообщений/тем.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-17</date>
				<rev-version>1.0.3b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Add PM to author post.]]></change>
					<change><![CDATA[Add option close/view list of thanks (thanks Gisher).]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлено уведомление автора сообщения по ЛС.]]></change>
					<change><![CDATA[Добавлена функция скрыть/показать список благодарностей в профиле (спасибо Gisher).]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-12</date>
				<rev-version>1.0.2b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Output of the list of thanks at review of the profile of the user is added.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Добавлен вывод списка благодарностей при просмотре профиля пользователя.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-10</date>
				<rev-version>1.0.1b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Changed some functions for load lowering on a server.]]></change>
					<change><![CDATA[The place of mapping of the list of the thanking are changed is transferred to a message body.]]></change>
					<change><![CDATA[Gif-files of buttons are changed, buttons are localised.]]></change>
					<change><![CDATA[Language variables are changed.]]></change>
					<change><![CDATA[Fix the minor error in the instruction in section of copying of files.]]></change>
					<change><![CDATA[The instruction of carrying over of the data in base with Thank Post MOD, in a folder contrib is added.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Изменены некоторые функции для снижения нагрузки на сервер.]]></change>
					<change><![CDATA[Место отображения списка благодаривших перенесено в тело сообщения.]]></change>
					<change><![CDATA[Изменены gif-файлы кнопок, кнопки локализованы.]]></change>
					<change><![CDATA[Изменены языковые переменные.]]></change>
					<change><![CDATA[Устранена небольшая ошибка в инструкции в секции копирования файлов.]]></change>
					<change><![CDATA[Добавлена инструкция переноса данных в базе с Thank Post MOD, в папке contrib.]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2009-01-08</date>
				<rev-version>1.0.0b</rev-version>
				<changelog lang="en">
					<change><![CDATA[Start date.]]></change>
				</changelog>
				<changelog lang="ru">
					<change><![CDATA[Первая версия мода.]]></change>
				</changelog>
			</entry>
		</history>
		<link-group>
			<link type="template" href="contrib/subsilver2.xml" lang="en">subsilver2</link>
			<link type="language" href="contrib/ru.xml" lang="en">Russian</link>
			<link type="language" href="contrib/ru.xml" lang="ru">Русский</link>
			<link type="contrib" href="contrib/install_update_from_v128_to_v129.xml" lang="en">Update from ver 1.2.8 to ver 1.2.9 Thanks for posts</link>
			<link type="contrib" href="contrib/install_update_from_v128_to_v129_subsilver2.xml" lang="en">Update from ver 1.2.8 to ver 1.2.9 Thanks for posts (for subsilver2)</link>
		</link-group>
	</header>
	<action-group>
		<copy>
			<file from="root/umil/*.*" to="umil/*.*"/>
			<file from="root/install_thanks_mod.php" to="install_thanks_mod.php"/>
			<file from="root/thankslist.php" to="thankslist.php"/>
			<file from="root/toplist.php" to="toplist.php"/>
			<file from="root/adm/style/acp_thanks.html" to="adm/style/acp_thanks.html"/>
			<file from="root/adm/style/acp_thanks_refresh.html" to="adm/style/acp_thanks_refresh.html"/>
			<file from="root/adm/style/acp_thanks_reput.html" to="adm/style/acp_thanks_reput.html"/>
			<file from="root/adm/style/acp_thanks_truncate.html" to="adm/style/acp_thanks_truncate.html"/>
			<file from="root/includes/functions_thanks.php" to="includes/functions_thanks.php"/>
			<file from="root/includes/functions_thanks_forum.php" to="includes/functions_thanks_forum.php"/>
			<file from="root/includes/acp/acp_thanks.php" to="includes/acp/acp_thanks.php"/>
			<file from="root/includes/acp/acp_thanks_refresh.php" to="includes/acp/acp_thanks_refresh.php"/>
			<file from="root/includes/acp/acp_thanks_reput.php" to="includes/acp/acp_thanks_reput.php"/>
			<file from="root/includes/acp/acp_thanks_truncate.php" to="includes/acp/acp_thanks_truncate.php"/>
			<file from="root/includes/acp/info/acp_thanks.php" to="includes/acp/info/acp_thanks.php"/>
			<file from="root/includes/acp/info/acp_thanks_refresh.php" to="includes/acp/info/acp_thanks_refresh.php"/>
			<file from="root/includes/acp/info/acp_thanks_reput.php" to="includes/acp/info/acp_thanks_reput.php"/>
			<file from="root/includes/acp/info/acp_thanks_truncate.php" to="includes/acp/info/acp_thanks_truncate.php"/>
			<file from="root/language/en/email/user_thanks.txt" to="language/en/email/user_thanks.txt"/>
			<file from="root/language/en/mods/thanks_mod.php" to="language/en/mods/thanks_mod.php"/>
			<file from="root/language/en/mods/info_ucp_thanks.php" to="language/en/mods/info_ucp_thanks.php"/>
			<file from="root/language/en/mods/info_acp_thanks.php" to="language/en/mods/info_acp_thanks.php"/>
			<file from="root/styles/prosilver/imageset/removethanks.gif" to="styles/prosilver/imageset/removethanks.gif"/>
			<file from="root/styles/prosilver/imageset/thankposts.gif" to="styles/prosilver/imageset/thankposts.gif"/>
			<file from="root/styles/prosilver/template/thanks_results.html" to="styles/prosilver/template/thanks_results.html"/>
			<file from="root/styles/prosilver/template/thankslist_body.html" to="styles/prosilver/template/thankslist_body.html"/>
			<file from="root/styles/prosilver/template/toplist_body.html" to="styles/prosilver/template/toplist_body.html"/>
			<file from="root/styles/prosilver/theme/images/icon_thanks.gif" to="styles/prosilver/theme/images/icon_thanks.gif"/>
			<file from="root/styles/prosilver/theme/images/icon_thanks_toplist.gif" to="styles/prosilver/theme/images/icon_thanks_toplist.gif"/>
			<file from="root/styles/prosilver/theme/images/reput_block_back.gif" to="styles/prosilver/theme/images/reput_block_back.gif"/>
			<file from="root/styles/prosilver/theme/images/reput_block_red.gif" to="styles/prosilver/theme/images/reput_block_red.gif"/>
			<file from="root/styles/prosilver/theme/images/reput_star_back.gif" to="styles/prosilver/theme/images/reput_star_back.gif"/>
			<file from="root/styles/prosilver/theme/images/reput_star_blue.gif" to="styles/prosilver/theme/images/reput_star_blue.gif"/>
			<file from="root/styles/prosilver/theme/images/reput_star_gold.gif" to="styles/prosilver/theme/images/reput_star_gold.gif"/>
		</copy>
		<open src="memberlist.php">
			<edit>
				<find><![CDATA[		// Inactive reason/account?]]></find>
				<action type="before-add"><![CDATA[	include($phpbb_root_path . 'includes/functions_thanks.' . $phpEx);	
	$user->add_lang('mods/thanks_mod');	
	output_thanks_memberlist($user_id);]]></action>
			</edit>
		</open>
		<open src="posting.php">
			<edit>
				<find><![CDATA[// Start session management]]></find>
				<action type="before-add"><![CDATA[include($phpbb_root_path . 'includes/functions_thanks.' . $phpEx);]]></action>
			</edit>
			<edit>
				<find><![CDATA[			$next_post_id = delete_post($forum_id, $topic_id, $post_id, $data);]]></find>
				<action type="after-add"><![CDATA[			delete_post_thanks($post_id);]]></action>
			</edit>
		</open>
		<open src="viewforum.php">
			<edit>
				<find><![CDATA[// Okay, lets dump out the page ...]]></find>
				<action type="before-add"><![CDATA[if (!function_exists('get_max_topic_thanks'))
{
	include($phpbb_root_path . 'includes/functions_thanks.' . $phpEx);
}
get_max_topic_thanks();
if ($topic_list)
{
	get_thanks_topic_number();
}]]></action>		
			</edit>
			<edit>
				<find><![CDATA[		$s_type_switch = ($row['topic_type'] == POST_ANNOUNCE || $row['topic_type'] == POST_GLOBAL) ? 1 : 0;]]></find>
				<action type="before-add"><![CDATA[		if ($config['thanks_topic_reput_view'])
		{
			get_thanks_topic_reput($topic_id);
		}]]></action>		
			</edit>
		</open>
		<open src="viewtopic.php">
			<edit>
				<find><![CDATA[	'PAGE_NUMBER' 	=> on_page($total_posts, $config['posts_per_page'], $start),]]></find>
				<action type="after-add"><![CDATA[	'START'         => $start,]]></action>
			</edit>
			<edit>
				<find><![CDATA[				'allow_pm'		=> $row['user_allow_pm'],]]></find>
				<action type="after-add"><![CDATA[				'allow_thanks_pm' => $row['user_allow_thanks_pm'],
				'allow_thanks_email' => $row['user_allow_thanks_email'],]]></action>
			</edit>
			<edit>
				<find><![CDATA[// Output the posts]]></find>
				<action type="before-add"><![CDATA[if (!function_exists('array_all_thanks'))
{
	include($phpbb_root_path . 'includes/functions_thanks.' . $phpEx);
}
array_all_thanks($post_list);
if (isset($_REQUEST['thanks']) && !isset($_REQUEST['rthanks'])) 
{
	insert_thanks(request_var('thanks', 0), $user->data['user_id']);
}
if (isset($_REQUEST['rthanks']) && !isset($_REQUEST['thanks']))
{
	delete_thanks(request_var('rthanks', 0), $user->data['user_id']);
}]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'L_IGNORE_POST'		=> ($row['hide_post']) ? sprintf($user->lang['POST_BY_FOE'], get_username_string('full', $poster_id, $row['username'], $row['user_colour'], $row['post_username']), '<a href="' . $viewtopic_url . "&amp;p={$row['post_id']}&amp;view=show#p{$row['post_id']}" . '">', '</a>') : '',]]></find>
				<action type="after-add"><![CDATA[		'S_FORUM_THANKS'	=> ($auth->acl_get('f_thanks', $forum_id)) ? true : false,]]></action>
			</edit>
			<edit>
				<find><![CDATA[	if (isset($cp_row['row']) && sizeof($cp_row['row']))]]></find>
				<action type="before-add"><![CDATA[	output_thanks($row['user_id']);]]></action>
			</edit>
		</open>
		<open src="includes/constants.php">
			<edit>
				<find><![CDATA[// Additional tables]]></find>
				<action type="after-add"><![CDATA[define('THANKS_TABLE', $table_prefix . 'thanks');]]></action>
			</edit>
		</open>
		<open src="includes/functions.php">
			<edit>
				<find><![CDATA[	$user_lang = $user->lang['USER_LANG'];]]></find>
				<action type="after-add"><![CDATA[	$user->add_lang('mods/thanks_mod');]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'U_MEMBERLIST'			=> append_sid("{$phpbb_root_path}memberlist.$phpEx"]]></find>
				<action type="after-add"><![CDATA[		'U_THANKSLIST'			=> append_sid("{$phpbb_root_path}thankslist.$phpEx"),
		'U_REPUT_TOPLIST'		=> append_sid("{$phpbb_root_path}toplist.$phpEx"),]]></action>
			</edit>
			<edit>
				<find><![CDATA[		'S_DISPLAY_MEMBERLIST'	=> (isset($auth)) ? $auth->acl_get('u_viewprofile') : 0,]]></find>
				<action type="after-add"><![CDATA[		'S_DISPLAY_THANKSLIST'	=> (isset($auth)) ? $auth->acl_get('u_viewthanks') : 0,
		'S_DISPLAY_TOPLIST'		=> (isset($auth)) ? $auth->acl_get('u_viewtoplist') : 0,]]></action>
			</edit>
		</open>
		<open src="includes/functions_display.php">
			<edit>
				<find><![CDATA[	// Used to tell whatever we have to create a dummy category or not.]]></find>		
				<action type="before-add"><![CDATA[	if (!function_exists('get_max_forum_thanks'))
	{
		include($phpbb_root_path . 'includes/functions_thanks_forum.' . $phpEx);
	}
	get_max_forum_thanks();
	foreach ($forum_rows as $row)
	{
		$forum_thanks_rating[] = $row['forum_id'];
	}
	global $cache;
	$cache->put('_forum_thanks_rating', $forum_thanks_rating);
	get_thanks_forum_number();
	$cache->destroy('_forum_thanks_rating');]]></action>		
			</edit>
			<edit>
				<find><![CDATA[		// Assign subforums loop for style authors]]></find>		
				<action type="before-add"><![CDATA[		if ($config['thanks_forum_reput_view'])
		{
			get_thanks_forum_reput($row['forum_id']);
		}]]></action>		
			</edit>
		</open>		
		<open src="includes/acp/acp_styles.php">
			<edit>
				<find><![CDATA[				'icon_back_top', 'icon_contact_aim', 'icon_contact_email', 'icon_contact_icq', 'icon_contact_jabber', 'icon_contact_msnm', 'icon_contact_pm', 'icon_contact_yahoo', 'icon_contact_www', 'icon_post_delete', 'icon_post_edit', 'icon_post_info', 'icon_post_quote', 'icon_post_report', 'icon_user_online', 'icon_user_offline', 'icon_user_profile', 'icon_user_search', 'icon_user_warn', 'button_pm_forward', 'button_pm_new', 'button_pm_reply', 'button_topic_locked', 'button_topic_new', 'button_topic_reply',]]></find>
				<inline-edit>
					<inline-find><![CDATA['button_topic_reply',]]></inline-find>
					<inline-action type="after-add"><![CDATA[ 'thankposts', 'removethanks',]]></inline-action>
				</inline-edit>
			</edit>
		</open>
		<open src="includes/ucp/ucp_prefs.php">
			<edit>
				<find><![CDATA[					'allowpm'		=> request_var('allowpm', (bool) $user->data['user_allow_pm']),]]></find>
				<action type="after-add"><![CDATA[					'allowthankspm'	=> request_var('allowthankspm', (bool) $user->data['user_allow_thanks_pm']),
					'allowthanksemail'	=> request_var('allowthanksemail', (bool) $user->data['user_allow_thanks_email']),]]></action>
			</edit>
			<edit>
				<find><![CDATA[							'user_allow_pm'			=> $data['allowpm'],]]></find>
				<action type="after-add"><![CDATA[							'user_allow_thanks_pm'	=> $data['allowthankspm'],
							'user_allow_thanks_email'=> $data['allowthanksemail'],]]></action>
			</edit>
			<edit>
				<find><![CDATA[					'S_ALLOW_PM'		=> $data['allowpm'],]]></find>
				<action type="after-add"><![CDATA[					'S_ALLOW_THANKS_PM'	=> $data['allowthankspm'],
					'S_ALLOW_THANKS_EMAIL'=> $data['allowthanksemail'],]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/imageset/imageset.cfg">
			<edit>
				<find><![CDATA[img_icon_user_warn = icon_user_warn.gif*20*20]]></find>
				<action type="after-add"><![CDATA[img_thankposts = thankposts.gif*20*20
img_removethanks = removethanks.gif*20*20]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/forumlist_body.html">
			<edit>
				<find><![CDATA[					<!-- IF forumrow.MODERATORS -->
]]></find>
				<action type="before-add"><![CDATA[					<!-- BEGIN reput -->
					<!-- IF forumrow.reput.S_THANKS_FORUM_REPUT_VIEW and forumrow.reput.FORUM_REPUT and not S_IS_BOT -->
					<span style="display: block;">
						<!-- IF forumrow.reput.S_THANKS_REPUT_GRAPHIC -->
						<span style="display: block; float: left; width: {forumrow.reput.THANKS_REPUT_GRAPHIC_WIDTH}; height: {forumrow.reput.THANKS_REPUT_HEIGHT}; background: URL({forumrow.reput.THANKS_REPUT_IMAGE_BACK});"><span style="display: block; height: {forumrow.reput.THANKS_REPUT_HEIGHT}; width: {forumrow.reput.FORUM_REPUT}; background: URL({forumrow.reput.THANKS_REPUT_IMAGE});"></span></span>&nbsp;
						<!-- ENDIF -->
					{L_REPUT}:&nbsp;{forumrow.reput.FORUM_REPUT}	
					</span>
					<!-- ENDIF -->
					<!-- END reput -->]]></action>
			</edit>
		</open>	
		<open src="styles/prosilver/template/memberlist_view.html">
			<edit>
				<find><![CDATA[</form>]]></find>
				<action type="before-add"><![CDATA[<script type="text/JavaScript">
function getElement(iElementId)
{
   if (document.all) 
   {
      return document.all[iElementId];
   }
   if (document.getElementById)
   {
      return document.getElementById(iElementId);
   }
}

function toggleElement(oElement)
{
   if (oElement.style.display == "none")
   {
      oElement.style.display = "";
   }
   else
   {
      oElement.style.display = "none";
   }
}
</script>

<div class="panel bg1">
	<div class="inner"><span class="corners-top"><span></span></span>
	<h3>{L_GRATITUDES}</h3>
		<dl>
			<dt><strong>{L_GIVEN}:</strong> {POSTER_GIVE_COUNT} {L_THANKS}</dt>
			<dd>
			<!-- IF POSTER_GIVE_COUNT and THANKS_PROFILELIST_VIEW -->
			<a href="javascript: toggleElement( getElement('show_thanks'));">{L_THANKS_LIST}</a>
			<div id="show_thanks" style="display: none;">{THANKS}</div>
			<!-- ENDIF -->
			</dd>
		</dl>		
	<span class="corners-bottom"><span></span></span></div>
</div>
<div class="panel bg2">
	<div class="inner"><span class="corners-top"><span></span></span>
		<dl>
			<dt><strong>{L_RECEIVED}:</strong> {POSTER_RECEIVE_COUNT} {L_THANKS}</dt>
			<dd>
			<!-- IF POSTER_RECEIVE_COUNT and THANKS_PROFILELIST_VIEW -->
			<a href="javascript: toggleElement( getElement('show_thanked'));">{L_THANKS_LIST}</a>
			<div id="show_thanked" style="display: none;">{THANKED}</div>
			<!-- ENDIF -->
			</dd>
		</dl>		
	<span class="corners-bottom"><span></span></span></div>
</div>]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/overall_header.html">
			<edit>
				<find><![CDATA[					<!-- IF S_DISPLAY_MEMBERLIST --><li class="icon-members"><a href="{U_MEMBERLIST}" title="{L_MEMBERLIST_EXPLAIN}">{L_MEMBERLIST}</a></li><!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[					<!-- IF S_DISPLAY_TOPLIST --><li class="icon-thanks_toplist"><a href="{U_REPUT_TOPLIST}" title="{L_REPUT_TOPLIST}">{L_REPUT_TOPLIST}</a></li><!-- ENDIF -->
				<!-- IF S_DISPLAY_THANKSLIST --><li class="icon-thanks"><a href="{U_THANKSLIST}" title="{L_THANKS_USER}">{L_GRATITUDES}</a></li><!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/ucp_prefs_personal.html">
			<edit>
				<find><![CDATA[			<label for="allowpm0"><input type="radio" name="allowpm" id="allowpm0" value="0"<!-- IF not S_ALLOW_PM --> checked="checked"<!-- ENDIF --> /> {L_NO}</label>
		</dd>
	</dl>]]></find>
				<action type="after-add"><![CDATA[	<dl>
		<dt><label for="allowthankspm1">{L_ALLOW_THANKS_PM}:</label><br /><span>{L_ALLOW_THANKS_PM_EXPLAIN}</span></dt>
		<dd>
			<label for="allowthankspm1"><input type="radio" name="allowthankspm" id="allowthankspm1" value="1"<!-- IF S_ALLOW_THANKS_PM --> checked="checked"<!-- ENDIF --> /> {L_YES}</label> 
			<label for="allowthankspm0"><input type="radio" name="allowthankspm" id="allowthankspm0" value="0"<!-- IF not S_ALLOW_THANKS_PM --> checked="checked"<!-- ENDIF --> /> {L_NO}</label>
		</dd>
	</dl>
	<dl>
		<dt><label for="allowthanksemail1">{L_ALLOW_THANKS_EMAIL}:</label><br /><span>{L_ALLOW_THANKS_EMAIL_EXPLAIN}</span></dt>
		<dd>
			<label for="allowthanksemail1"><input type="radio" name="allowthanksemail" id="allowthanksemail1" value="1"<!-- IF S_ALLOW_THANKS_EMAIL --> checked="checked"<!-- ENDIF --> /> {L_YES}</label> 
			<label for="allowthanksemail0"><input type="radio" name="allowthanksemail" id="allowthanksemail0" value="0"<!-- IF not S_ALLOW_THANKS_EMAIL --> checked="checked"<!-- ENDIF --> /> {L_NO}</label>
		</dd>
	</dl>]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/template/viewforum_body.html">
			<edit>
				<find><![CDATA[					<!-- IF topicrow.ATTACH_ICON_IMG -->{topicrow.ATTACH_ICON_IMG} <!-- ENDIF -->{L_POST_BY_AUTHOR} {topicrow.TOPIC_AUTHOR_FULL} &raquo; {topicrow.FIRST_POST_TIME}]]></find>	
				<action type="after-add"><![CDATA[					<!-- BEGIN reput -->
					<!-- IF topicrow.reput.S_THANKS_TOPIC_REPUT_VIEW and topicrow.reput.TOPIC_REPUT and not S_IS_BOT -->
					<span style="display: block;">
						<!-- IF topicrow.reput.S_THANKS_REPUT_GRAPHIC -->
						<span style="display: block; float: left; width: {topicrow.reput.THANKS_REPUT_GRAPHIC_WIDTH}; height: {topicrow.reput.THANKS_REPUT_HEIGHT}; background: URL({topicrow.reput.THANKS_REPUT_IMAGE_BACK});"><span style="display: block; height: {topicrow.reput.THANKS_REPUT_HEIGHT}; width: {topicrow.reput.TOPIC_REPUT}; background: URL({topicrow.reput.THANKS_REPUT_IMAGE});"></span></span>&nbsp;
						<!-- ENDIF -->
					{L_REPUT}:&nbsp;{topicrow.reput.TOPIC_REPUT}
					</span>
					<!-- ENDIF -->
					<!-- END reput -->]]></action>	
			</edit>		
		</open>	
		<open src="styles/prosilver/template/viewtopic_body.html">
			<edit>
				<find><![CDATA[					<!-- IF postrow.U_QUOTE --><li class="quote-icon"><a href="{postrow.U_QUOTE}" title="{L_REPLY_WITH_QUOTE}"><span>{L_REPLY_WITH_QUOTE}</span></a></li><!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[					<!-- IF  not postrow.S_FIRST_POST_ONLY or (not START and postrow.S_ROW_COUNT == 0) -->
						<!-- IF not postrow.S_POST_ANONYMOUS and postrow.S_FORUM_THANKS and S_USER_LOGGED_IN and not postrow.S_IS_OWN_POST and (not postrow.S_ALREADY_THANKED or postrow.S_REMOVE_THANKS) --><li class="{postrow.THANKS_IMG}"><a href="{postrow.THANKS_LINK}" title="{postrow.THANK_ALT}{postrow.POST_AUTHOR}"></a></li><!-- ENDIF -->					
					<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[			<!-- IF postrow.SIGNATURE --><div id="sig{postrow.POST_ID}" class="signature">{postrow.SIGNATURE}</div><!-- ENDIF -->
		<!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[		<!-- IF postrow.THANKS and postrow.THANKS_POSTLIST_VIEW -->
			<hr />
			<div class="content">
				<!-- IF not postrow.S_POST_ANONYMOUS and not S_IS_BOT-->
				<dl class="postbody small">
					<dt>{postrow.THANK_TEXT}{postrow.POST_AUTHOR_FULL}{postrow.THANK_TEXT_2}</dt>
					<dd>{postrow.THANKS}</dd>
				</dl>
				<!-- ENDIF -->	
			</div>
		<!-- ENDIF -->
		<!-- IF postrow.S_THANKS_POST_REPUT_VIEW and postrow.POST_REPUT and not postrow.S_POST_ANONYMOUS and not S_IS_BOT -->
			<div class="content">
				<dl class="postbody">
					<dt class="small"><strong>{L_REPUT}:</strong>&nbsp;{postrow.POST_REPUT}</dt>
					<dd>
					<!-- IF postrow.S_THANKS_REPUT_GRAPHIC -->
					<div style="width: {postrow.THANKS_REPUT_GRAPHIC_WIDTH}; height: {postrow.THANKS_REPUT_HEIGHT}; background: URL({postrow.THANKS_REPUT_IMAGE_BACK});"><div style="height: {postrow.THANKS_REPUT_HEIGHT}; width: {postrow.POST_REPUT}; background: URL({postrow.THANKS_REPUT_IMAGE});"></div></div>&nbsp;
					<!-- ENDIF -->
					</dd>
				</dl>
			</div>
		<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[		<!-- IF postrow.POSTER_FROM --><dd><strong>{L_LOCATION}:</strong> {postrow.POSTER_FROM}</dd><!-- ENDIF -->]]></find>
				<action type="after-add"><![CDATA[		<!-- IF not postrow.S_POST_ANONYMOUS and postrow.THANKS_COUNTERS_VIEW -->
			<dd><strong>{L_GIVEN}:</strong><!-- IF postrow.POSTER_GIVE_COUNT < 1 --> {postrow.POSTER_GIVE_COUNT} {L_THANK}<!-- ELSEIF postrow.POSTER_GIVE_COUNT > 1 --> <a href="{postrow.POSTER_GIVE_COUNT_LINK}">{postrow.POSTER_GIVE_COUNT}</a> {L_THANKS}<!-- ELSE --> <a href="{postrow.POSTER_GIVE_COUNT_LINK}">{postrow.POSTER_GIVE_COUNT}</a> {L_THANK}<!-- ENDIF --></dd>
			<dd><strong>{L_RECEIVED}:</strong><!-- IF postrow.POSTER_RECEIVE_COUNT < 1 --> {postrow.POSTER_RECEIVE_COUNT} {L_THANK}<!-- ELSEIF postrow.POSTER_RECEIVE_COUNT > 1 --> <a href="{postrow.POSTER_RECEIVE_COUNT_LINK}">{postrow.POSTER_RECEIVE_COUNT}</a> {L_THANKS}<!-- ELSE --> <a href="{postrow.POSTER_RECEIVE_COUNT_LINK}">{postrow.POSTER_RECEIVE_COUNT}</a> {L_THANK}<!-- ENDIF --></dd>
		<!-- ENDIF -->]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/theme/buttons.css">
			<edit>
				<find><![CDATA[.sitehome,]]></find>
				<inline-edit>
					<inline-find><![CDATA[.sitehome,]]></inline-find>
					<inline-action type="after-add"><![CDATA[ .icon-thanks, .icon-thanks_toplist,]]></inline-action>
				</inline-edit>
			</edit>
			<edit>
				<find><![CDATA[/* Set profile icon dimensions */]]></find>
				<action type="after-add"><![CDATA[ul.profile-icons li.thanks-icon	{ width: {IMG_THANKPOSTS_WIDTH}px; height: {IMG_THANKPOSTS_HEIGHT}px; }
ul.profile-icons li.removethanks-icon	{ width: {IMG_REMOVETHANKS_WIDTH}px; height: {IMG_REMOVETHANKS_HEIGHT}px; }]]></action>
			</edit>
		</open>
		<open src="styles/prosilver/theme/colours.css">
			<edit>
				<find><![CDATA[.icon-search					{ background-image: url("{T_THEME_PATH}/images/icon_search.gif"); }]]></find>
				<action type="after-add"><![CDATA[.icon-thanks					{ background-image: url("{T_THEME_PATH}/images/icon_thanks.gif"); }
.icon-thanks_toplist			{ background-image: url("{T_THEME_PATH}/images/icon_thanks_toplist.gif"); }]]></action>
			</edit>
			<edit>
				<find><![CDATA[/* Moderator icons */]]></find>
				<action type="before-add"><![CDATA[.thanks-icon, .thanks-icon a		{ background-image: url("{IMG_THANKPOSTS_SRC}"); }
.removethanks-icon, .removethanks-icon a	{ background-image: url("{IMG_REMOVETHANKS_SRC}"); }]]></action>
			</edit>
		</open>
		<php-installer><![CDATA[install_thanks_mod.php]]></php-installer>
		<diy-instructions lang="en"><![CDATA[install_thanks_mod.php - there is a PHP install file that needs to be run in order to complete the installation. To run it point your browser to, for example, domain.tld/phpBB3/install_thanks_mod.php. After installation remove file install_thanks_mod.php.]]></diy-instructions>
		<diy-instructions lang="ru"><![CDATA[Для завершения установки запустите через браузер файл install_thanks_mod.php (например, набрав в адресной строке: адрес_форума/install_thanks_mod.php). После установки МОДа удалите файл install_thanks_mod.php.]]></diy-instructions>
	</action-group>
</mod>